# 文系でもできる！Cloudflare Workers から Pages への移行マニュアル

このマニュアルは、現在「Workers」で動かしているサイトを、より管理が簡単でNext.jsと相性の良い「Pages」へお引越しするための手順書です。黒い画面（コマンドライン）は使いません。

## 事前準備
1. **GitHub** にログインしておく
2. **Cloudflare** の管理画面にログインしておく
3. **Contentful** の「Space ID」と「Access Token」を手元にメモしておく

---

## 手順1：Cloudflare Pages で新規プロジェクトを作る

1. Cloudflareのダッシュボード（管理画面）を開きます。
2. 左メニューの **「Workers & Pages」** をクリックします。
3. 画面右側にある青いボタン **「アプリケーションの作成 (Create application)」** をクリックします。
4. **「Pages」** タブをクリックし、**「Gitに接続 (Connect to Git)」** ボタンを押します。

## 手順2：GitHubと連携する

1. 「GitHubアカウントの接続」という画面が出たら、自分のアカウントを選択します。
2. リポジトリ（ソースコードの入れ物）の一覧が表示されます。
3. 今回のHPのコードが入っているリポジトリ（例: `scj-renewal` や `sportscomission` など）を選び、**「セットアップの開始 (Begin setup)」** をクリックします。

## 手順3：ビルド設定を行う（ここが一番大事！）

設定画面が開くので、以下のように入力・選択してください。

* **プロジェクト名:** そのままでOK（URLの一部になります）。
* **プロダクションブランチ:** 通常は `main` または `master` のままにします。
* **フレームワーク プリセット (Framework preset):**
    * プルダウンメニューから **「Next.js (Static HTML Export)」** または単に **「Next.js」** を選んでください。
    * ※現状のコード（`output: 'export'`）設定済みであれば、正しいプリセットを選べば自動的に認識されます。
    * ※もし選択肢になければ、ビルドコマンドに `npm run build`、出力ディレクトリに `out` を指定します。

## 手順4：環境変数を設定する (Contentfulとの接続)

同じ画面の下の方に **「環境変数 (Environment variables)」** という項目があります。ここを開いて、Contentfulのキーを入力します。
※これをしないと、本番環境でニュースなどが表示されません。

1. **「変数の追加」** をクリックします。
2. 以下のセットを入力します（名前はプログラムの設定に合わせます）。

| 変数名 (Variable name) | 値 (Value) |
| :--- | :--- |
| `CONTENTFUL_SPACE_ID` | あなたのSpace ID |
| `CONTENTFUL_ACCESS_TOKEN` | あなたのAccess Token |

入力し終わったら、**「保存してデプロイ (Save and Deploy)」** ボタンをポチッと押します。

## 手順5：完了を待つ

* 画面が切り替わり、ログ（文字の羅列）が流れます。「処理中」の合図です。
* 数分待って **「成功しました (Success)」** と表示されれば完了です！
* 画面に表示されたURL（例: `https://scj-renewal.pages.dev`）をクリックして、サイトが表示されるか確認しましょう。

---

## うまくいかない時は？

* **「Build Failed」と出た場合:** ビルド設定の「フレームワークプリセット」が `Next.js` になっているか再確認してください。また、環境変数（トークンなど）が正しく入力されているか確認しましょう。
* **画像が表示されない場合:** 環境変数のスペルミスがないか確認してください。

お疲れ様でした！これで自動更新（GitHubにプッシュするだけで更新）の環境が整いました。
